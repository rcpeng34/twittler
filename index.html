<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
	<script src="moment.min.js"></script>
  </head>
  <body>
    <script>
	// updateUser should call updateMessages based on user name provided
	// updateUser should update the title with the name
	var updateUser = function (name) {
	  alert(name);
	};
	// updateMessages should clear the message list and update it
	var updateMessages = function () {
	};
	
    $(document).ready(function(){
	// begin block to update users with all users
	for (var i = 0; i < users.length; i++){
		$("#users").append('<br>');
		$("#users").append('<a ' + 'id="' + users[i] + '">' + users[i] + '</a>');
	};	
	
        var index = streams.home.length - 1;
		var displayedIndex = 0;
		
		// adjust the setInterval time to lower load time
		// begin block to update tweets		
		// now to check for updates and display
	  	// completed initial load of tweets
		window.setInterval( function() {
			// if streams.home is longer than before, there's a new tweet
			var newIndex = streams.home.length - 1;
			while (newIndex > displayedIndex ) {
				var tweet = streams.home[newIndex];
				var tweetTime = streams.home[newIndex]["created_at"];
				// change tweetTime to a human format ie x min ago
				tweetTime = moment(tweetTime).fromNow();
				$('#list').append('<li>' + tweetTime + " " + tweet.user + " tweeted: " + tweet.message + '</li>');
				newIndex -= 1;
			};
		}, 10000);
    });
/*
NOTES
- To Do -
make users clickable
update title on click
modify stream update to run once at page load
remove old tweets
*/	
    </script>

	<div id="container" style="width:5000px">

	<div id="header" style="background-color:#FFA700;width:500px;">
	<h1 style="margin-bottom:0;">Twittler: All Users</h1>
	</div>

	<div id="users" style="background-color:#FFA700;width:100px;float: left;">
	<br>
	<b>Stream</b>
	<br>
	<a id = "all" onclick = "updateUser(shawndrost);">All Users</a>
	</div id="test" style=">
	<div>

	<div id="content" style="background-color:#EEEEEE;float: left;">
	<ul id="list">
	</ul>
	</div>
	
	</body>
</html>
